version: '3.9'

services:
  ros1:
    command: roslaunch markhor_gazebo test_world.launch
    build : .
    network_mode: host
    environment:
      - DISPLAY=host.docker.internal:0.0
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix  

  ros2:
    build : ./ros2.Dockerfile
    network_mode: host
    environment:
      - DISPLAY=host.docker.internal:0.0
    volumes:
      - /tmp/.X11-unix:/tmp/.X11-unix  

  bridge:
    image: ros:foxy-ros1-bridge-focal
    environment:
      - "ROS_HOSTNAME=bridge"
      - "ROS_MASTER_URI=http://ros1:11311"
    command: ros2 run ros1_bridge dynamic_bridge
  

  
  
  