<?xml version="1.0"?>
<launch>
    <!-- Pointcloud to laserscan conversion for slam -->
    <node name="pointcloud_to_laserscan_node" pkg="pointcloud_to_laserscan"
        type="pointcloud_to_laserscan_node" respawn="false" output="screen">
        <remap from="/cloud_in" to="/velodyne_points" />
        <param name="min_height" value="-0.3" />
        <param name="max_height" value="0.3" />
        <param name="angle_min" value="-3.14" />
        <param name="angle_max" value="3.14" />
        <param name="range_min" value="0" />
        <param name="range_max" value="100" />
        <param name="use_inf" value="false" />
    </node>

    <!-- RobotLocalization (Sensor fusion) -->
    <node pkg="robot_localization" type="ekf_localization_node" name="ekf_localization"
        clear_params="true">
        <rosparam command="load" file="$(find markhor_slam)/config/ekf_localization.yaml" />
    </node>
    
    <!-- SLAM -->
    <node name="slam_gmapping" pkg="gmapping" type="slam_gmapping" output="screen">
        <param name="base_frame" value="base_link" />
        <param name="odom_frame" value="odom" />
        <param name="map_frame" value="map" />
        <param name="maxUrange" value="10.0" />
        <param name="sigma" value="0.05" />
        <param name="kernelSize" value="1" />
        <param name="lstep" value="0.05" />
        <param name="astep" value="0.05" />
        <param name="iterations" value="5" />
        <param name="lsigma" value="0.075" />
        <param name="ogain" value="3.0" />
        <param name="lskip" value="0" />
        <param name="minimumScore" value="50" />
        <param name="minimumValid" value="10" />
        <param name="publishTf" value="true" />
        <param name="scan_topic" value="/scan" />
        <param name="map_update_interval" value="1.0" />
        <param name="max_range" value="20.0" />
        <param name="maxUrange" value="30.0" />
    </node>
</launch>